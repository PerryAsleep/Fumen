# Configuration
ChartConverter's behavior can be configured via the `config.json` file in the application's install directory. Comments and trailing commas are supported.

## Example config.json
```json
{
	"LogLevel": "Info",
	"LogToFile": true,
	"LogDirectory": "C:\\Fumen\\Logs",
	"LogFlushIntervalSeconds": 20,
	"LogBufferSizeBytes": 10240,

	"InputDirectory": "C:\\Games\\StepMania 5\\Songs",
	"InputNameRegex": ".*\\.(sm|ssc)$",
	"InputChartType": "dance-single",
	"DifficultyRegex": ".",

	"OutputDirectory": "C:\\Fumen\\Exports",
	"OutputChartType": "dance-double",
	"OverwriteBehavior": "IfFumenGenerated",
	"NonChartFileCopyBehavior": "DoNotCopy",

	"OutputVisualizations": true,
	"VisualizationsDirectory": "C:\\Fumen\\Visualizations",

	"DesiredArrowWeights":
	{
		"dance-single": [25, 25, 25, 25],
		"dance-double": [6, 12, 10, 22, 22, 12, 10, 6],
	},

	"StepTypeReplacements" :
	{
		"SameArrow": [ "SameArrow" ],
		"NewArrow": [ "NewArrow" ],
		"CrossoverFront": [ "CrossoverFront" ],
		"CrossoverBehind": [ "CrossoverBehind" ],
		"InvertFront": [ "InvertFront" ],
		"InvertBehind": [ "InvertBehind" ],
		"FootSwap": [ "FootSwap" ],
		"BracketHeelNewToeNew": [ "BracketHeelNewToeNew" ],
		"BracketHeelNewToeSame": [ "BracketHeelNewToeSame", "BracketHeelSameToeNew" ],
		"BracketHeelSameToeNew": [ "BracketHeelSameToeNew", "BracketHeelNewToeSame" ],
		"BracketHeelSameToeSame": [ "BracketHeelSameToeSame" ],
		"BracketHeelSameToeSwap": [ "BracketHeelSameToeSwap", "BracketHeelSwapToeSame" ],
		"BracketHeelNewToeSwap": [ "BracketHeelNewToeSwap", "BracketHeelSwapToeNew" ],
		"BracketHeelSwapToeSame": [ "BracketHeelSwapToeSame", "BracketHeelSameToeSwap" ],
		"BracketHeelSwapToeNew": [ "BracketHeelSwapToeNew", "BracketHeelNewToeSwap" ],
		"BracketOneArrowHeelSame": [ "BracketOneArrowHeelSame" ],
		"BracketOneArrowHeelNew": [ "BracketOneArrowHeelNew", "BracketOneArrowToeNew" ],
		"BracketOneArrowToeSame": [ "BracketOneArrowToeSame" ],
		"BracketOneArrowToeNew": [ "BracketOneArrowToeNew", "BracketOneArrowHeelNew" ],
	},
}
```

## Configuration Values

### LogLevel
String type. The log level for the application. Valid values are `"Info"`, `"Warn"`, `"Error"`, or `"None"`.
### LogToFile
Boolean type. If `true` then the application will log to the directory specified by `LogDirectory` in addition to logging to the console. If `false` then the application will only log to the console.
### LogDirectory
String type. Path to directory to log to.
### LogFlushIntervalSeconds
Integer type. Interval in seconds to flush the log to disk. If set to `0` then the log will not flush on a timer.
### LogBufferSizeBytes
Integer type. Must be non-negative. If the log buffer accumulates this many bytes of data it will flush to disk.

### InputDirectory
String type. Directory to search for song files within. Typically the `Songs` directory for StepMania, e.g. `"C:\\Games\\StepMania 5\\Songs"`. The application will recursively search through all of this directory's sub-directories for song files.
### InputNameRegex
String type. [Regular Expression](https://docs.microsoft.com/en-us/dotnet/standard/base-types/regular-expression-language-quick-reference) for matching song file names. `".*\\.(sm|ssc)$"` will match all `sm` and `ssc` files.
### InputChartType
String type. StepMania [StepsType](https://github.com/stepmania/stepmania/blob/6a645b4710dd6a89a5f22a2d849e86a98af5c9a3/src/GameManager.cpp#L47) for charts to use as input. Currently the only supported value is `"dance-single"`.
### DifficultyRegex
String type. [Regular Expression](https://docs.microsoft.com/en-us/dotnet/standard/base-types/regular-expression-language-quick-reference) for matching StepMania [DifficultyNames](https://github.com/stepmania/stepmania/blob/6a645b4710dd6a89a5f22a2d849e86a98af5c9a3/src/Difficulty.cpp#L12). `"."` will match all difficulties.

### OutputDirectory
String type. Directory to export converted files to. Using the same directory set for `InputDirectory` will result in an in-place conversion. Using a different directory will result in the files matched from `InputDirectory` to be updated and written to the specified directory. The directory structure from within `InputDirectory` will be maintained.
### OutputChartType
String type. StepMania [StepsType](https://github.com/stepmania/stepmania/blob/6a645b4710dd6a89a5f22a2d849e86a98af5c9a3/src/GameManager.cpp#L47) for charts to generate. Current supported values are `"dance-single"` and `"dance-double"`.
### OverwriteBehavior
String type. Behavior for overwriting existing charts. Valid values are:
- `"DoNotOverwrite"`: Existing charts will not be updated.
- `"IfFumenGenerated"`: Existing charts will be updated if they were generated by this application using any version.
- `"IfFumenGeneratedAndNewerVersion"`: Existing charts will be updated if they were generated by this application using an older version.
- `"Always"`: Existing charts will always be updated.
### NonChartFileCopyBehavior
String type. Behavior for copying non-chart files from within a song's folder when `OutputDirectory` is different than `InputDirectory`. Valid values are:
- `"DoNotCopy"`: Do not copy non-chart files.
- `"IfNewer"`: Copy non-chart files if they do not exist in the destination directory, or if they do exist then only copy them if they are newer than the destination file.
- `"Always"`: Always copy the non-chart files. 

### OutputVisualizations
Boolean type. If `true` then the application will generate [Visualizations](Visualizations.md) in the `VisualizationsDirectory` for each chart generated.
### VisualizationsDirectory
String type. Path to directory to generate [Visualizations](Visualizations.md) to.

### DesiredArrowWeights
Object type. Each value in this object is a key value pair. The key is a string representing a StepMania [StepsType](https://github.com/stepmania/stepmania/blob/6a645b4710dd6a89a5f22a2d849e86a98af5c9a3/src/GameManager.cpp#L47) and the value is an array of integers representing the desired weights per lane for that type. When generating charts for the specified `OutputChartType`, `DesiredArrowWeights` is used to control, for each lane, what percentage of the chart's steps should fall in that lane. For example, for doubles it is desirable to following a bell-like curve with more steps on the middles than on the outer arrows. To specify this you could specify `"dance-double": [6, 12, 10, 22, 22, 12, 10, 6]`. The values do not need to sum to 100. They will be compared against each other and normalized when used generate charts.

These values intruct the application to prefer charts which more closely match the configured distribution over charts which less closely match it.

These weights may not be honored precisely depending on how much they deviate from allowed steps. For example doubles weights of `"dance-double": [50, 0, 0, 0, 0, 0, 0, 50]` will not result in a chart that only uses the outer most arrows as this level of stretch is not supported, and many step types cannot be represented with just those two arrows (for example, it would be impossible to perform a crossover).

### StepTypeReplacements
Object type. Each value in this object is a key value pair. The key is a string representing a [StepType](StepTypes.md) and the value is an array of StepTypes that the application can use instead of the key StepType when generating a chart. The main purpose of this structure is to allow the application to be more lenient with brackets, though it can also be used to replace certain StepTypes. For example, to remove crossovers you could set `"CrossoverFront": [ "NewArrow" ]` and `"CrossoverBehind": [ "NewArrow" ]`.